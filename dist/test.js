const path=require("path"),{bold:bold}=require("@nexssp/ansi"),{error:error}=require("@nexssp/logdebug"),{testOne:testOne}=require("./testOne"),testAll=async(e="./src/",{glob:s,display:r=!1,ignore:t=[]}={})=>{require("fs").existsSync(e)||(error(`Source folder does not exist. ${e}`),process.exit(1)),t.includes("!**/node_modules")||(t=t.concat("!**/node_modules")),s=s||"./*_nexss-test.js",e.endsWith("/")||e.endsWith("\\")||(error("Source folder must contain at the end '/' eg: ./src/"),process.exit(1));const o=require("fast-glob");let n=`${e}${s}`.replace(/\\/g,"/");const l=await o([n],{ignore:t});0===l.length&&(error(bold(`No test files has been found in the ${path.resolve(e)}`)),error(bold("Please remove testing command or add/check testing files.")),process.exit(1));const i=process.cwd();return await Promise.all(l.map((async e=>testOne(`${i}/${e}`,{display:r}))))};module.exports={testAll:testAll};